<!DOCTYPE html> <html>
<head>
  <meta charset="UTF-8">
  <title>Mission Control - Powered by ASU Software Engineering</title>
  <style>
    body {
      font-family: 'Courier New', Courier, monospace;
      background: #121212;
      color: #e0e0e0;
      padding: 0;
      margin: 0;
      text-align: center;
    }
    .asu-header {
      background: #8C1D40;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 3px solid #FFC627;
      margin-bottom: 20px;
    }
    .asu-logo {
      height: 50px;
      width: auto;
      background: white;
      padding: 5px 10px;
      border-radius: 4px;
    }
    .asu-links {
      text-align: right;
      flex-grow: 1;
    }
    .asu-header a {
      color: #FFC627;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
      font-size: 14px;
    }
    .asu-header a:hover {
      text-decoration: underline;
    }
    .asu-header-text {
      color: #FFC627;
      font-size: 12px;
      margin-top: 5px;
    }
    .content {
      padding: 20px;
    }
    h1 {
      color: #00ff90;
      margin-top: 0;
    }
    .subtitle {
      color: #FFC627;
      font-size: 14px;
      margin-top: -10px;
      margin-bottom: 20px;
    }
    #message, #hintDisplay, #messageGame {
      margin: 20px auto;
      padding: 10px;
      max-width: 600px;
      background: #1d1d1d;
      border: 2px solid #00ff90;
      border-radius: 8px;
    }
    #hintDisplay {
      display: none;
      font-style: italic;
      color: #ffcc00;
    }
    input {
      padding: 8px;
      font-size: 16px;
      margin-bottom: 10px;
    }
    #answerInput {
      width: 200px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #00ff90;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    button:disabled {
      background: #555;
      cursor: not-allowed;
    }
    button:hover:not(:disabled) {
      background: #00cc70;
    }
    .difficultyBtn {
      padding: 15px 30px;
      font-size: 18px;
      margin: 10px;
      background: #00ff90;
      color: #121212;
      font-weight: bold;
    }
    .difficultyBtn.easy {
      background: #4CAF50;
    }
    .difficultyBtn.medium {
      background: #FFA500;
    }
    .difficultyBtn.hard {
      background: #FF5252;
    }
    #changeDifficultyBtn {
      background: #666;
      font-size: 14px;
      padding: 8px 15px;
    }
    #difficultyIndicator {
      display: none;
      margin: 10px auto;
      padding: 5px 15px;
      max-width: 200px;
      background: #2d2d2d;
      border-radius: 4px;
      font-size: 14px;
    }
    pre {
      text-align: left;
      background: #2d2d2d;
      padding: 10px;
      overflow-x: auto;
    }
    .errorMessage {
      color: red;
    }
    .question-separator {
      border-top: 1px solid #00ff90;
      margin: 15px 0 10px 0;
      padding-top: 10px;
    }
    .next-question {
      color: #FFC627;
      font-size: 1em;
      font-weight: bold;
      margin-bottom: 8px;
    }
    #gameArea {
      display: none;
    }
    #difficultySelection {
      display: block;
    }

    /* Mobile responsiveness */
    @media (max-width: 600px) {
      .asu-header {
        flex-direction: column;
        padding: 10px;
      }
      .asu-logo {
        height: 40px;
        margin-bottom: 10px;
      }
      .asu-links {
        text-align: center;
      }
      .asu-header a {
        margin: 0 8px;
        font-size: 12px;
      }
      .content {
        padding: 10px;
      }
      h1 {
        font-size: 1.5em;
      }
      .subtitle {
        font-size: 12px;
      }
      #message, #hintDisplay, #messageGame {
        padding: 15px;
        font-size: 14px;
        max-width: 100%;
        margin: 15px auto;
      }
      .difficultyBtn {
        padding: 12px 20px !important;
        font-size: 16px !important;
        margin: 5px !important;
        display: block;
        width: 90%;
        margin-left: auto !important;
        margin-right: auto !important;
      }
      input, button {
        font-size: 16px !important;
      }
      #answerInput {
        width: 80%;
        max-width: 300px;
      }
      pre {
        font-size: 12px !important;
        overflow-x: auto;
      }
    }
  </style>
</head>

<body>
<div class="asu-header">
  <img src="logo.png" alt="ASU Logo" class="asu-logo">
  <div class="asu-links">
    <a href="https://scai.engineering.asu.edu/" target="_blank">ASU SCAI</a> |
    <a href="https://asuonline.asu.edu/online-degree-programs/undergraduate/bachelor-science-software-engineering" target="_blank">Software Engineering</a>
    <div class="asu-header-text">School of Computing & AI â€¢ Arizona State University</div>
  </div>
</div>

<div class="content">
<h1>Mission Control</h1>
<div class="subtitle">Powered by ASU Software Engineering</div>

<div id="difficultySelection">
  <div id="message">
    <strong>Mission Briefing:</strong><br><br>
    A nasty bug has infiltrated our network!<br>
    Your mission: Debug and restore critical systems.<br><br>
    <strong>Select Your Difficulty Level:</strong>
  </div>
  <br>
  <button class="difficultyBtn easy" onclick="startGame('easy', isFirstStart)">EASY<br><small>Perfect for beginners</small></button>
  <button class="difficultyBtn medium" onclick="startGame('medium', isFirstStart)">MEDIUM<br><small>Ready for more challenge</small></button>
  <button class="difficultyBtn hard" onclick="startGame('hard', isFirstStart)">ADVANCED<br><small>Challenge yourself!</small></button>
</div>

<div id="gameArea">
  <div id="difficultyIndicator"></div>
  <div id="messageGame"></div>

  <input type="text" id="answerInput" placeholder="Enter answer">
  <br>
  <button id="hintBtn">Hint</button>
  <button id="submitBtn">Execute</button>
  <button id="changeDifficultyBtn">Change Difficulty</button>

  <div id="hintDisplay"></div>
</div>

<script>
  // Define mission steps for each difficulty level
  const stepsData = {
    easy: [
      {
        answer: "start",
        message: "Great! Let's start our mission!<br><br>A computer bug has gotten into our system. We need to fix it!<br><br>To unlock the system, type a different word for 'begin':<br>(Hint: It begins with 'S')",
        hint: "The word rhymes with 'heart'. It's another way to say 'begin'."
      },
      {
        answer: "next",
        message: "Awesome! We're in the system!<br><br>Type 'next' to move forward:",
        hint: "Just type the word 'next'."
      },
      {
        answer: "3",
        message: "Oh no! The system is showing error codes from different parts:<br><br>" +
                 "ğŸ¤– Robot Arm: Error Code <strong>8</strong><br>" +
                 "ğŸ’¡ Light System: Error Code <strong>3</strong><br>" +
                 "ğŸ”Š Sound System: Error Code <strong>5</strong><br>" +
                 "ğŸšª Door Lock: Error Code <strong>1</strong><br>" +
                 "ğŸ“¡ WiFi Signal: Error Code <strong>4</strong><br><br>" +
                 "We need to fix the problem with the LIGHT SYSTEM first!<br>" +
                 "What is the error code for the Light System?",
        hint: "Look for the ğŸ’¡ Light System in the list above. What number is next to it?"
      },
      {
        answer: "5",
        message: "Good! Now let's practice finding BUGS in patterns!<br><br>" +
                 "Programmers need to spot mistakes in code, just like finding mistakes in number patterns.<br><br>" +
                 "These numbers count by 2's: <strong>2, 4, 5, 6, 8</strong><br><br>" +
                 "One number is WRONG! Which one doesn't belong?<br>" +
                 "Type the wrong number:",
        hint: "Counting by 2's means: 2, 4, 6, 8, 10... Which number breaks this pattern?"
      },
      {
        answer: "ddss",
        message: "Excellent! You found the bug! <strong>5</strong> was wrong because when counting by 2's it should be: 2, 4, <strong>6</strong>, 8, 10.<br><br>" +
                 "Finding bugs in patterns is what programmers do every day!<br><br>" +
                 "Now let's navigate through a grid!<br><br>" +
                 "Here's a simple map:<br><br>" +
                 "<pre style='font-size: 18px; line-height: 1.5;'>" +
                 "â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”\n" +
                 "â”‚ ğŸš€â”‚   â”‚   â”‚  W = Up\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  A = Left\n" +
                 "â”‚   â”‚   â”‚   â”‚  S = Down\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  D = Right\n" +
                 "â”‚   â”‚   â”‚ ğŸ¯â”‚\n" +
                 "â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜\n" +
                 "</pre>" +
                 "The ğŸš€ is your START position. Navigate to reach the ğŸ¯ target!<br>" +
                 "Type the commands (example: dd means right, right):",
        hint: "From the rocket, go RIGHT 2 times, then DOWN 2 times. Try: ddss (or ssdd, dsds - any order works!)"
      },
      {
        answer: "fix",
        message: "Perfect! The rocket reached the target! ğŸ¯<br><br>" +
                 "You just programmed a rocket with a sequence of commands - that's what programmers do!<br><br>" +
                 "Now let's try a simple SECRET CODE!<br><br>" +
                 "We found a secret message: <strong>EHW</strong><br><br>" +
                 "SECRET CODE RULE: Move each letter forward by 1 in the alphabet.<br>" +
                 "Example: A becomes B, B becomes C, Z becomes A, etc.<br><br>" +
                 "Using this rule, decode the message <strong>EHW</strong>:<br>" +
                 "Type your answer in lowercase:",
        hint: "Eâ†’F, Hâ†’I, Wâ†’X. Put them together to see what word you get!"
      },
      {
        answer: "teapot",
        message: "Perfect! You decoded: EHW â†’ FIX<br><br>" +
                 "That's what we're doing - FIXING the system!<br><br>" +
                 "<div class='question-separator'></div>" +
                 "<div class='next-question'>ğŸ“¡ NEXT CHALLENGE:</div>" +
                 "Now let's learn about websites and error codes!<br><br>" +
                 "Click this link to read about a funny error code: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/418\" target=\"_blank\">HTTP 418 Error</a><br><br>" +
                 "<strong>QUESTION:</strong> The error message says: <strong>\"I'm a _____\"</strong><br><br>" +
                 "Fill in the blank with the word from the error message (lowercase):",
        hint: "It's something you use to make tea! Rhymes with 'seapot'."
      },
      {
        answer: "error",
        message: "Fun fact! That was error code 418: 'I'm a teapot' - a silly joke that programmers made!<br><br>" +
                 "Websites show ERROR MESSAGES when something goes wrong. These messages help us understand what happened.<br><br>" +
                 "<div class='question-separator'></div>" +
                 "<div class='next-question'>ğŸ” NEXT CHALLENGE:</div>" +
                 "<strong>QUESTION:</strong> Type the word 'error' to continue:",
        hint: "Just type the 5-letter word: error"
      },
      {
        answer: "b",
        message: "<div class='next-question'>ğŸ”’ NEXT CHALLENGE: PASSWORDS</div>" +
                 "Let's talk about PASSWORDS!<br><br>" +
                 "<strong>QUESTION:</strong> Which password is STRONGER and harder for bad guys to guess?<br><br>" +
                 "<strong>A)</strong> hello<br>" +
                 "<strong>B)</strong> H3llo!<br><br>" +
                 "Type A or B:",
        hint: "Look carefully - which one has capital letters, numbers, and special symbols?"
      },
      {
        answer: "any",
        message: "Perfect! <strong>Why B is correct:</strong><br><br>" +
                 "Password <strong>hello</strong> is easy to guess because:<br>" +
                 "â€¢ It's all lowercase<br>" +
                 "â€¢ It's a common word<br>" +
                 "â€¢ No numbers or special symbols<br><br>" +
                 "Password <strong>H3llo!</strong> is MUCH stronger because:<br>" +
                 "â€¢ Has a CAPITAL letter (H)<br>" +
                 "â€¢ Has a number (3 instead of 'e')<br>" +
                 "â€¢ Has a special symbol (!)<br>" +
                 "â€¢ Harder for computers and bad guys to guess!<br><br>" +
                 "Strong passwords protect your accounts!<br><br>" +
                 "ğŸ‰ <strong>You've learned so much!</strong> ğŸ‰<br>" +
                 "You can now: decode secret messages, understand error codes, and create strong passwords!<br><br>" +
                 "<div class='question-separator'></div>" +
                 "<div class='next-question'>ğŸ¯ FINAL CHALLENGE!</div>" +
                 "Remember the cipher from earlier? Shift each letter RIGHT by 1.<br>" +
                 "(Aâ†’B, Bâ†’C, Zâ†’A)<br><br>" +
                 "<strong>QUESTION:</strong> Type YOUR NAME or NICKNAME using this cipher:",
        hint: "If your name is 'Sam', shift each letter: Sâ†’T, Aâ†’B, Mâ†’N. So you'd type 'tbn'!"
      }
    ],

    medium: [
      {
        answer: "start",
        message: "Mission Briefing:<br> A nasty bug has infiltrated our network. Your first task is to initialize the system. Enter a keyword to initialize the system:",
        hint: "To initialize means to START something. What's another common word for beginning a system?"
      },
      {
        answer: "commit",
        message: "Kernel activated, we got into the system to check what has been going on.<br>Type 'commit' to proceed to the next step:"
      },
      {
        answer: "0",
        message: "We found some pseudo-code. We need to figure out what is wrong with this code, maybe that is going to help us to safe our system.<br><br>" +
                 "PSEUDO-CODE:<br>" +
                 "<pre>" +
                 "Let numbers = [8, 3, 5, 1, 4]<br>" +
                 "Set min_value = 0<br>" +
                 "For each number in numbers:<br>" +
                 "  If number < min_value then<br>" +
                 "    Set min_value = number<br>" +
                 "Print 'The smallest number is ' + min_value<br><br>" +
                 "</pre>" +
                 "Enter the number that is stored in min_value (e.g., '10'):",
        hint: "Go through the code step by step and write out min_value for each iteration."
      },
      {
        answer: "first element",
        message: "0 is of course not the min_value we were hoping for looking at this list. So our code is wrong, this might have caused an issue." +
                  "<p>If we want to make sure that from a list 'numbers' our algorithm always finds the smallest number, which element out of the array should we set min_value to at the beginning?:<br><br>" +
                 "PSEUDO-CODE:<br>" +
                 "<pre>" +
                 "Let numbers = [8, 3, 5, 1, 4]<br>" +
                 "Set min_value = 0<br>" +
                 "For each number in numbers:<br>" +
                 "  If number < min_value then<br>" +
                 "    Set min_value = number<br>" +
                 "Print 'The smallest number is ' + min_value<br><br>" +
                 "</pre>" +
                 "Enter the element of the list that should be used (e.g. 'third element' or 'second element'):",
        hint: "Look at the array and also think about different arrangements of numbers. What is a good starting point which will lead to the correct answer?"
      },
      {
        answer: "medium_grid",
        message: "Bug fixed! So this should help making our system more reliable.<br><br>" +
                 "Navigate to collect the key â­ and catch the bug ğŸ›!<br><br>" +
                 "<pre style='font-size: 16px; line-height: 1.4;'>" +
                 "â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”\n" +
                 "â”‚ ğŸš€â”‚   â”‚   â”‚   â”‚  W = Up\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  A = Left\n" +
                 "â”‚   â”‚ ğŸ”’â”‚   â”‚   â”‚  S = Down\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  D = Right\n" +
                 "â”‚ ğŸ”’â”‚ â­â”‚   â”‚ ğŸ”’â”‚\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  ğŸš€ = START here\n" +
                 "â”‚   â”‚   â”‚   â”‚ ğŸ›â”‚  ğŸ› = Your goal\n" +
                 "â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜  ğŸ”’ = Can't pass â€¢ â­ = Must get!\n" +
                 "</pre>" +
                 "<strong>Rules:</strong> Get the â­, avoid ğŸ”’, never visit same square twice!<br>" +
                 "Enter your movement commands:",
        hint: "Start from the rocket. Go right twice, then down twice to get the star. Then find your way to the bug without retracing! Try: ddssasdd"
      },
      {
        answer: "debug",
        message: "Excellent navigation! Bug located! ğŸ›<br><br>" +
                 "Our system now shows us another code snippet. We think that the keyword to continue is whatever the 'result' is at the end.<br><br>" +
                 "Below is a snippet of pseudo-code that describes a cipher. Read it carefully. You can assume 'shiftLeft' 'shiftRight' uses the letter left or right of that letter in the alphabet.<br><br>" +
                 "<pre>" +
                 "function decode(word) {\n" +
                 "    result = \"\";\n" +
                 "    for (each letter in word) {\n" +
                 "         if (isUpperCase(letter)) {\n" +
                 "              // For uppercase letters, shift left by 1\n" +
                 "              result += shiftLeft(letter, 1);\n" +
                 "         } else {\n" +
                 "              // For lowercase letters, shift right by 1\n" +
                 "              result += shiftRight(char, 1);\n" +
                 "         }\n" +
                 "    }\n" +
                 "    return result;\n" +
                 "}\n\n" +
                 "scrambledWord = \"EdatH\";\n" +
                 "decodedKey = decode(scrambledWord);\n" +
                 "print(decodedKey);\n" +
                 "</pre>" +
                 "What is the decoded key? Enter the result in lower case as keyword to continue:",
        hint: "Apply the rules: For 'E' (uppercase), shift left â†’ 'D'. For lowercase letters: 'd'â†’'e', 'a'â†’'b'.."
      },
      {
        answer: "brew coffee",
        message: "Good job, we are getting closer to fixing our system! We are getting a 418 error code. HTTP is the protocol of the web, every webpage you use uses it! Error codes tell us what went wrong. Read about this error code here:<br>" +
                  " <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/418\" target=\"_blank\">HTTP 418 Status Code</a><br><br>" +
                   "HTTP is the protocol of the web and it uses error codes to indicate problems when a webpage or server cannot be reached. " +
                  "This particular status code comes with a playful message. Look carefully at the description and research what HTTP 418 means.<br>" +
                  "What does the server refuse to do based on this error code? (two words, lowercase)",
        hint: "HTTP status 418 is a reference to the humorous 'I'm a teapot' code. The teapot refuses to do what coffee makers do."
      },
      {
        answer: "404",
        message: "We found out the error code our system was showing and were able to fix it. We need to research some more about HTTP. The system wants to know the number of the most common HTTP error code. Maybe you even know it without having to look it up, maybe you have seen it somewhere before?:<br>",
        hint: "Search online for the most common HTTP error code, we are looking for the number only."
      },
      {
        answer: "true false true false",
        message: "Good job, we got our system back!!!" +
                 "<p><p>We are now trying to figure out why our system was infiltrated so we are checking if maybe our tests for checking for strong passwords is having an issue. "+
                  "<p>Maybe not having strong enough passwords was how someone infiltrated our system." +
                  "<p>We consider a password as strong if it is at least 8 symbols long, contains at least one special character (including numbers) and uses upper and lower case."+
                   "<p>We tested our system with different passwords, the method we called returns 'true' if the password fulfills the requirements and 'false' if it does not. We need the sequence of 'true/false' to get to the next step (e.g. true false true):" +
                  "function isStrongPassword(password) returns true/false:" +
                  "<p>Passwords tested:"+
                  "<p>saDf8d9d*f"+
                  "<p>7jasdfe"+
                  "<p>GreatJobU2?"+
                  "<p>HelloThere",
        hint: "Check each password and see if it fulfills our requirements, e.g. 'hiThere1' has a number, 8 symbols and upper/lower case â†’ true."
      },
      {
        answer: "any",
        message: "Excellent work! The password system is now secure!<br><br>" +
                 "ğŸ‰ <strong>You've mastered debugging and security!</strong> ğŸ‰<br><br>" +
                 "<strong>Final Challenge!</strong><br>" +
                 "Convert your NAME or NICKNAME to alphabet numbers!<br><br>" +
                 "<strong>The Code:</strong> A=1, B=2, C=3, ... Z=26<br><br>" +
                 "<strong>Example:</strong> SAM â†’ S=19, A=1, M=13 â†’ Type: <strong>19 1 13</strong><br><br>" +
                 "Type the numbers for your name (separated by spaces):",
        hint: "Count where each letter is in the alphabet. A is 1st, B is 2nd, C is 3rd, etc. Separate numbers with spaces!"
      }
    ],

    hard: [
      {
        answer: "initialize",
        message: "CRITICAL ALERT: System breach detected!<br><br>Security protocols require full system initialization. Enter the complete technical term for starting a system (not the abbreviated version):",
        hint: "Think of the formal computer science term, not 'start'. It's a 10-letter word."
      },
      {
        answer: "git commit",
        message: "Access granted. We need to commit our changes to version control.<br><br>What is the complete Git command to save changes to the repository? (two words, lowercase):",
        hint: "It's the command developers use to save their work. Format: 'git _____'"
      },
      {
        answer: "0",
        message: "Advanced debugging required. Analyze this algorithm with multiple edge cases:<br><br>" +
                 "<pre>" +
                 "Let numbers = [8, 3, 5, 1, 4]<br>" +
                 "Set min_value = 0<br>" +
                 "Set max_iterations = 0<br>" +
                 "For each number in numbers:<br>" +
                 "  max_iterations++<br>" +
                 "  If number < min_value then<br>" +
                 "    Set min_value = number<br>" +
                 "  End if<br>" +
                 "End for<br>" +
                 "Print 'Min: ' + min_value + ', Iterations: ' + max_iterations<br>" +
                 "</pre>" +
                 "What value is stored in min_value after execution?",
        hint: "Trace through each iteration carefully. Does any number in the array meet the condition 'number < 0'?"
      },
      {
        answer: "first element",
        message: "The initialization bug is more severe than expected.<br><br>" +
                  "For a min-finding algorithm to work correctly with any input (including all positive or all negative numbers), what should min_value be initialized to?<br><br>" +
                  "Options: 'first element', 'infinity', 'zero', or 'null'<br>" +
                  "Type the best answer:",
        hint: "In practice, programmers usually initialize to an element FROM the list. While infinity works mathematically, what's the most practical choice?"
      },
      {
        answer: "cache",
        message: "Cryptographic analysis required. This is a more complex substitution cipher:<br><br>" +
                 "<pre>" +
                 "function advancedDecode(word) {\n" +
                 "    result = \"\";\n" +
                 "    for (i = 0; i < word.length; i++) {\n" +
                 "        letter = word[i];\n" +
                 "        if (i % 2 == 0) {\n" +
                 "            // Even positions: shift left by 2\n" +
                 "            result += shiftLeft(letter, 2);\n" +
                 "        } else {\n" +
                 "            // Odd positions: shift right by 3\n" +
                 "            result += shiftRight(letter, 3);\n" +
                 "        }\n" +
                 "    }\n" +
                 "    return result;\n" +
                 "}\n\n" +
                 "encrypted = \"Exeeg\";\n" +
                 "print(advancedDecode(encrypted));\n" +
                 "</pre>" +
                 "What is the decoded message? (lowercase):",
        hint: "Position 0 (E): shift left 2 â†’ C. Position 1 (x): shift right 3 â†’ a. Position 2 (e): shift left 2 â†’ c. Continue..."
      },
      {
        answer: "hard_grid",
        message: "Decoded: CACHE! Excellent work!<br><br>" +
                 "Advanced pathfinding: collect the token â­ then secure the data ğŸ’¾!<br><br>" +
                 "<pre style='font-size: 16px; line-height: 1.4;'>" +
                 "â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”\n" +
                 "â”‚ ğŸš€â”‚ âš ï¸â”‚   â”‚ â­â”‚  W = Up\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  A = Left\n" +
                 "â”‚   â”‚   â”‚   â”‚   â”‚  S = Down\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  D = Right\n" +
                 "â”‚ ğŸ’¾â”‚   â”‚ âš ï¸â”‚   â”‚\n" +
                 "â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  ğŸš€ = START here\n" +
                 "â”‚ âš ï¸â”‚   â”‚   â”‚   â”‚  ğŸ’¾ = Your goal\n" +
                 "â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜  âš ï¸ = Firewall â€¢ â­ = Must get!\n" +
                 "</pre>" +
                 "<strong>Rules:</strong> Get â­, avoid âš ï¸, never visit same square twice!<br>" +
                 "Enter your movement sequence:",
        hint: "Start from the rocket. Firewall blocks going right. Go DOWN, navigate to star (top-right), then work your way back to data (left-middle). Requires strategic planning!"
      },
      {
        answer: "1998",
        message: "Perfect pathfinding! Data secured! ğŸ’¾<br><br>" +
                 "You successfully navigated around the firewalls using strategic planning.<br><br>" +
                 "HTTP protocol deep dive required.<br><br>Read about the HTTP 418 status code: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/418\" target=\"_blank\">HTTP 418 Documentation</a><br><br>" +
                  "The HTTP 418 status code originates from an April Fools' joke RFC. Research RFC 2324 to find out: In what YEAR was this RFC published?",
        hint: "Research 'RFC 2324' and the Hyper Text Coffee Pot Control Protocol. Look for the publication year."
      },
      {
        answer: "500",
        message: "Security analysis continuation. What is the HTTP status code for 'Internal Server Error' (server-side failure)?<br><br>" +
                  "Enter just the 3-digit number:",
        hint: "It's in the 5xx range, which indicates server errors. The most common one ends in 00."
      },
      {
        answer: "true true true false",
        message: "Final security audit: Password strength validation with REGEX patterns.<br><br>" +
                 "A password is considered STRONG if it meets ALL these criteria:<br>" +
                 "â€¢ Minimum 10 characters (increased from 8)<br>" +
                 "â€¢ At least one uppercase letter<br>" +
                 "â€¢ At least one lowercase letter<br>" +
                 "â€¢ At least one digit<br>" +
                 "â€¢ At least one special character (!@#$%^&*)<br><br>" +
                 "Evaluate these passwords and enter the sequence of true/false:<br><br>" +
                 "1) saDf8d9d*f<br>" +
                 "2) 7jasdfE!@#<br>" +
                 "3) GreatJobU2?<br>" +
                 "4) HelloThere<br><br>" +
                 "Format: true false true false",
        hint: "Count carefully! Password 1: 10 chars âœ“, has 'D' (uppercase) âœ“, lowercase âœ“, digits âœ“, * âœ“ = TRUE. Password 4 has no digits or special chars!"
      },
      {
        answer: "any",
        message: "Outstanding! Security protocols fully restored!<br><br>" +
                 "ğŸ‰ <strong>Expert-level debugging complete!</strong> ğŸ‰<br><br>" +
                 "<strong>Final Advanced Challenge!</strong><br>" +
                 "Apply a compound algorithm to your NAME or NICKNAME:<br><br>" +
                 "<strong>Algorithm:</strong><br>" +
                 "1. REVERSE your name<br>" +
                 "2. SHIFT each letter RIGHT by 1 (like a cipher)<br><br>" +
                 "<strong>Example:</strong> SAM<br>" +
                 "Step 1: Reverse â†’ MAS<br>" +
                 "Step 2: Shift right â†’ Mâ†’N, Aâ†’B, Sâ†’T â†’ <strong>NBT</strong><br><br>" +
                 "Enter your encoded name (lowercase):",
        hint: "First write your name backwards, then shift each letter to the next one in the alphabet. Aâ†’B, Zâ†’A"
      }
    ]
  };

  let currentDifficulty = 'medium';
  let currentStep = 0;
  let steps = stepsData[currentDifficulty];
  let isFirstStart = true; // Track if this is a fresh start or difficulty switch

  const answerInput = document.getElementById("answerInput");
  const submitBtn = document.getElementById("submitBtn");
  const hintBtn = document.getElementById("hintBtn");
  const messageDiv = document.getElementById("messageGame");
  const hintDisplay = document.getElementById("hintDisplay");
  const changeDifficultyBtn = document.getElementById("changeDifficultyBtn");
  const difficultyIndicator = document.getElementById("difficultyIndicator");

  // Start game with selected difficulty
  function startGame(difficulty, resetProgress) {
    currentDifficulty = difficulty;
    steps = stepsData[difficulty];

    // Reset to step 0 if this is a fresh start or user chose to reset
    if (resetProgress === true) {
      currentStep = 0;
    }

    // If switching difficulty and currentStep is beyond new difficulty's length, reset to last question
    if (currentStep >= steps.length) {
      currentStep = steps.length - 1;
    }

    // Hide difficulty selection, show game area
    document.getElementById("difficultySelection").style.display = "none";
    document.getElementById("gameArea").style.display = "block";

    // Update difficulty indicator
    difficultyIndicator.textContent = "Current Level: " + difficulty.toUpperCase() + " (Question " + (currentStep + 1) + "/" + steps.length + ")";
    difficultyIndicator.style.display = "block";

    // Load current step (might not be first if keeping progress)
    messageDiv.innerHTML = steps[currentStep].message;
    answerInput.value = "";
    answerInput.disabled = false;
    submitBtn.disabled = false;
    hintBtn.disabled = false;
    hintDisplay.style.display = "none";
    answerInput.focus();

    // After first game starts, mark as no longer first start
    isFirstStart = false;
  }

  // Change difficulty mid-game
  changeDifficultyBtn.addEventListener("click", function() {
    const keepProgress = confirm("Switch difficulty but stay on question " + (currentStep + 1) + "?\n\nClick OK to continue from question " + (currentStep + 1) + " in new difficulty\nClick Cancel to start from the beginning");

    // Show difficulty selection
    document.getElementById("gameArea").style.display = "none";
    document.getElementById("difficultySelection").style.display = "block";
    hintDisplay.style.display = "none";

    // Set flag for whether to reset progress
    isFirstStart = !keepProgress;
  });

  // When "Hint" is clicked, display the current step's hint
  hintBtn.addEventListener("click", function() {
    if (steps[currentStep].hint) {
      hintDisplay.innerHTML = "ğŸ’¡ " + steps[currentStep].hint;
      hintDisplay.style.display = "block";
    } else {
      hintDisplay.innerHTML = "No hint available for this step.";
      hintDisplay.style.display = "block";
    }
  });

  // Helper function to decode cipher (shift left by 1) - for EASY mode
  function decodeCipher(text) {
    let result = "";
    for (let i = 0; i < text.length; i++) {
      let char = text[i];
      if (char >= 'a' && char <= 'z') {
        // Shift left by 1 (bâ†’a, aâ†’z)
        result += char === 'a' ? 'z' : String.fromCharCode(char.charCodeAt(0) - 1);
      } else if (char >= 'A' && char <= 'Z') {
        // Shift left by 1 for uppercase
        result += char === 'A' ? 'Z' : String.fromCharCode(char.charCodeAt(0) - 1);
      } else {
        // Keep non-letter characters as-is
        result += char;
      }
    }
    return result;
  }

  // Helper function to decode alphabet numbers - for MEDIUM mode
  function decodeAlphabetNumbers(numberString) {
    const numbers = numberString.trim().split(/\s+/);
    let result = "";
    for (let i = 0; i < numbers.length; i++) {
      const num = parseInt(numbers[i]);
      if (num >= 1 && num <= 26) {
        // Convert number to letter (1=A, 2=B, etc.)
        result += String.fromCharCode(64 + num);
      } else {
        result += "?";
      }
    }
    return result;
  }

  // Helper function to decode reverse + shift cipher - for HARD mode
  function decodeReverseShift(text) {
    let result = "";
    // First, shift left by 1 (reverse the shift right)
    for (let i = 0; i < text.length; i++) {
      let char = text[i];
      if (char >= 'a' && char <= 'z') {
        result += char === 'a' ? 'z' : String.fromCharCode(char.charCodeAt(0) - 1);
      } else if (char >= 'A' && char <= 'Z') {
        result += char === 'A' ? 'Z' : String.fromCharCode(char.charCodeAt(0) - 1);
      } else {
        result += char;
      }
    }
    // Then reverse the string
    return result.split('').reverse().join('');
  }

  // Helper function to validate grid navigation with obstacles and stars
  function validateGridPath(commands, config) {
    let x = 0, y = 0; // Starting position
    let collectedStar = false;
    let visited = {}; // Track visited squares
    visited['0,0'] = true; // Mark starting position as visited

    for (let i = 0; i < commands.length; i++) {
      let cmd = commands[i];

      // Move based on command
      if (cmd === 'w') y--;
      else if (cmd === 's') y++;
      else if (cmd === 'a') x--;
      else if (cmd === 'd') x++;
      else return false; // Invalid command

      // Check if out of bounds
      if (x < 0 || x > 3 || y < 0 || y > 3) return false;

      // Check if already visited (if no-revisit rule is enabled)
      if (config.noRevisit) {
        let pos = x + ',' + y;
        if (visited[pos]) return false;
        visited[pos] = true;
      }

      // Check if hit obstacle
      if (config.obstacles) {
        for (let obs of config.obstacles) {
          if (x === obs[0] && y === obs[1]) return false;
        }
      }

      // Check if collected star
      if (config.star && x === config.star[0] && y === config.star[1]) {
        collectedStar = true;
      }
    }

    // Check if ended at correct position
    if (x !== config.end[0] || y !== config.end[1]) return false;

    // Check if star was collected (if required)
    if (config.star && !collectedStar) return false;

    return true;
  }

  // Show decoded result with retry option
  function showDecodedResult(userAnswer) {
    let decodedName = "";
    let resultMessage = "";
    const lastStepIndex = steps.length - 1;

    // Decode based on difficulty level
    if (currentDifficulty === 'easy' && steps[lastStepIndex].answer === 'any') {
      decodedName = decodeCipher(userAnswer);
      resultMessage = "<strong>Let's decode your answer!</strong><br>" +
                     "You typed: <strong>" + userAnswer + "</strong><br>" +
                     "Decoded: <strong>" + decodedName + "</strong><br><br>";
    } else if (currentDifficulty === 'medium' && steps[lastStepIndex].answer === 'any') {
      decodedName = decodeAlphabetNumbers(userAnswer);
      resultMessage = "<strong>Let's decode your numbers!</strong><br>" +
                     "You typed: <strong>" + userAnswer + "</strong><br>" +
                     "Decoded name: <strong>" + decodedName + "</strong><br><br>";
    } else if (currentDifficulty === 'hard' && steps[lastStepIndex].answer === 'any') {
      decodedName = decodeReverseShift(userAnswer);
      resultMessage = "<strong>Let's decode your compound cipher!</strong><br>" +
                     "You typed: <strong>" + userAnswer + "</strong><br>" +
                     "Decoded name: <strong>" + decodedName + "</strong><br><br>";
    } else {
      // For difficulty levels without name challenge, just show victory
      showFinalVictory("");
      return;
    }

    messageDiv.innerHTML = resultMessage +
                          "<strong>Does this look correct?</strong><br><br>" +
                          "<button id='tryAgainBtn' style='background: #FFA500;'>Try Again</button> " +
                          "<button id='finishBtn' style='background: #00ff90;'>Finish Mission!</button>";

    answerInput.disabled = true;
    submitBtn.disabled = true;
    hintBtn.disabled = true;

    // Add event listeners for new buttons
    document.getElementById('tryAgainBtn').addEventListener('click', function() {
      // Reset currentStep back to the last question
      currentStep = lastStepIndex;

      // Restore the question
      messageDiv.innerHTML = steps[currentStep].message;
      answerInput.value = "";
      answerInput.disabled = false;
      submitBtn.disabled = false;
      hintBtn.disabled = false;
      hintDisplay.style.display = "none";
      answerInput.focus();
    });

    document.getElementById('finishBtn').addEventListener('click', function() {
      showFinalVictory(decodedName);
    });
  }

  // Show final victory message
  function showFinalVictory(decodedName) {
    let victoryMessage = "<span style='color: #00ff90; font-size: 1.2em;'>âœ“ MISSION ACCOMPLISHED!</span><br><br>";

    if (currentDifficulty === 'medium' && decodedName) {
      victoryMessage += "Congratulations! Mission accomplished, <strong>" + decodedName + "</strong>!<br><br>";
    }

    victoryMessage += "System override complete. You've successfully debugged and restored the critical systems!<br><br>" +
                     "<strong>Congratulations on completing the " + currentDifficulty.toUpperCase() + " difficulty!</strong><br><br>" +
                     "<div style='background: #1d1d1d; padding: 15px; border: 2px solid #FFC627; border-radius: 8px; margin-top: 20px;'>" +
                     "<span style='color: #FFC627; font-size: 1.1em;'>ğŸ“ Enjoyed These Challenges?</span><br><br>" +
                     "If you loved solving these problems, imagine what you could build as a <strong>software engineer</strong>! " +
                     "Join <a href='https://scai.engineering.asu.edu/' target='_blank' style='color: #00ff90;'>ASU SCAI</a> and turn your problem-solving skills into a career.<br><br>" +
                     "<a href='https://asuonline.asu.edu/online-degree-programs/undergraduate/bachelor-science-software-engineering' target='_blank' style='color: #FFC627; font-weight: bold;'>Explore Software Engineering at ASU â†’</a>" +
                     "</div>";

    messageDiv.innerHTML = victoryMessage;
    answerInput.disabled = true;
    submitBtn.disabled = true;
    hintBtn.disabled = true;
    changeDifficultyBtn.textContent = "Play Again";
    changeDifficultyBtn.disabled = false;
    difficultyIndicator.textContent = "Current Level: " + currentDifficulty.toUpperCase() + " - COMPLETED!";
  }

  // When "Execute" is clicked, check the answer and advance if correct
  submitBtn.addEventListener("click", function() {
    const userAnswer = answerInput.value.trim().toLowerCase();
    hintDisplay.style.display = "none";

    // Special handling for grid navigation puzzles
    let isCorrect = false;
    if (steps[currentStep].answer === "ddss") {
      // Easy mode grid: 2 D's and 2 S's in any order
      const dCount = (userAnswer.match(/d/g) || []).length;
      const sCount = (userAnswer.match(/s/g) || []).length;
      const totalLength = userAnswer.length;
      // Valid if exactly 2 D's, 2 S's, and nothing else
      isCorrect = (dCount === 2 && sCount === 2 && totalLength === 4);
    } else if (steps[currentStep].answer === "medium_grid") {
      // Medium mode grid with obstacles, star, and no-revisit rule
      isCorrect = validateGridPath(userAnswer, {
        end: [3, 3],
        star: [1, 2],
        obstacles: [[1, 1], [0, 2], [3, 2]],
        noRevisit: true
      });
    } else if (steps[currentStep].answer === "hard_grid") {
      // Hard mode grid with firewalls, star, and no-revisit rule
      isCorrect = validateGridPath(userAnswer, {
        end: [0, 2],
        star: [3, 0],
        obstacles: [[1, 0], [2, 2], [0, 3]],
        noRevisit: true
      });
    } else if (steps[currentStep].answer === "any" && userAnswer.length > 0) {
      // Final question (accepts any answer)
      isCorrect = true;
    } else if (steps[currentStep].answer === "first element" && currentDifficulty === "hard") {
      // Hard mode min_value question accepts both "first element" and "infinity"
      isCorrect = (userAnswer === "first element" || userAnswer === "infinity");
    } else {
      // Normal answer checking
      isCorrect = (userAnswer === steps[currentStep].answer);
    }

    if (isCorrect) {
      currentStep++;

      if (currentStep < steps.length) {
        messageDiv.innerHTML = steps[currentStep].message;
        answerInput.value = "";
        // Update progress indicator
        difficultyIndicator.textContent = "Current Level: " + currentDifficulty.toUpperCase() + " (Question " + (currentStep + 1) + "/" + steps.length + ")";
        answerInput.focus();
      } else {
        // Show decoded name and offer retry
        showDecodedResult(userAnswer);
      }
    } else {
      answerInput.value = "";
      messageDiv.innerHTML = "<span class='errorMessage'>âŒ ERROR: Incorrect answer. System remains compromised. Please try again.</span><p>" +
                             steps[currentStep].message +
                             "<br><br><small>Your answer: " + userAnswer + "</small>";
    }
  });

  // Enable Enter key to trigger the Execute button
  answerInput.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
      submitBtn.click();
    }
  });
</script>

</div><!-- end content -->
</body> </html>
